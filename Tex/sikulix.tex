\chapter{SikuliX}
	\section{Instalace}
	Po stažení balíčku započne instalace jeho spuštěním\footnote{Je potřeba instalace JRE nebo JDK 6 a~vyšší, v~linuxové distribuci balíky \emph{libopencv-core2.4, libopencv-imgproc2.4, libopencv-highgui2.4, libtesseract3} a~\emph{wmctrl} \citep{SikuliX}}. Je ukázána instalace v~Linuxu, avšak instalace ve Windows je obdobná. V~průběhu máme na výběr různé možnosti, jak chceme nástroj používat, viz obrázek \ref{Instal}. Např. zda chceme používat SikuliX-IDE a~Python nebo Ruby, jestli budeme používat jiné IDE a~Javu a~zda chceme používat OCR funkce. Zaškrtneme všechna políčka kromě \emph{Ruby (JRuby)} a~klikneme na \emph{Setup Now}. Jsme dotázáni, zda chceme balíčky stáhnout, nebo ukončit instalaci. Zvolíme \emph{Yes}. Další dotaz je na verzi Jythonu, kterou chceme použít, s~upozorněním, že může nastat problém se znaky v~kódování UTF-8. Opět zvolíme \emph{Yes}. Začne vytváření souborů a~měla by se otevřít dvě okna jako na obrázu \ref{InstalOK}, obě potvrdíme tlačítkem \emph{OK}. Pokud vše proběhne v~pořádku, vzniknou v~adresáři soubory podobné těmto\footnote{Může se lišit na různých OS} \emph{runsikulix, SetupStuff, SikuliX-1.1.0-SetupLog.txt, sikulixapi.jar, sikulix.jar}.
	\begin{figure}[ht!]
		\centering
		\caption{Instalace SikuliX}
		\label{Instal}
		\includegraphics[width=13.5cm]{img/Instalace/Instalace.png}
	\end{figure}
	\begin{figure}[ht!]
		\centering
		\caption{Test instalace}
		\label{InstalOK}
		\includegraphics[width=9cm]{img/Instalace/InstalaceOK.png}\\[0.3cm]
		\includegraphics[width=9cm]{img/Instalace/InstalaceOK1.png}
	\end{figure}
	
	\section{Tvorba testů}
	Pro tvorbu testů pomocí SikuliX jsou nejdůležitější snímky (screenshoty) řídících prvků, které bude SikuliX hledat a~případně používat k~některým akcím. Je tedy vhodné si nejprve aplikaci spustit, vybrat příslušné prvky a~vytvořit jejich snímky. Při jejich tvorbě se doporučuje preciznost a~přesnost, neboť v~jistých situacích mohou nastat problémy, které budou zmíněny později.
	
	Pokud je snímků více, je vhodné je třídit do adresářů. To není nutné, ale zlepšuje to čitelnost kódu a~usnadňuje práci s~nástrojem. Adresáře mohou např. sdružovat snímky prvků, které jsou si nějakým způsobem podobné (tlačítka, textová pole, výběrové seznamy, chybové hlášky, apod.). Stejně tak je vhodné snímky pojmenovávat na základě toho, co obsahují (vstupní textové pole, label Vstup, apod.).
	
	Dle \citep{SikuliXImgs} SikuliX interně používá třídu ImageIO z~Javy. Podporované formáty jsou tedy bmp, wbmp, jpg, jpeg, png a gif.
	
	Pokud je vytvářený test jednoduchý a~není potřeba většího množství testů, je jednodušší vytvořit jej pomocí SikuliX-IDE. Pokud však chceme aplikaci testovat podrobněji a~psát velké množství testovacích případů, je vhodnější použít některý z~podporovaných programovacích jazyků a~využít tak jeho možnosti jako nadstavbu nad SikuliX.
	
	\section{SikuliX-IDE}
	Spustit SikuliX-IDE je možné různými způsoby \citep{SikuliX}.
	\begin{enumerate}
		\item Spuštěním souboru SikuliX.app (Mac) nebo SikuliX.exe (Windows),
		\item dvojklikem na soubor runsikulix (Linux) nebo runsikulix.cmd (Windows),
		\item z~příkazové řádky příkazem\\
		\texttt{java -jar cesta/k/sikulix.jar [volitelne parametry]}
	\end{enumerate}
	Po spuštění vypadá IDE jako na obrázku \ref{SikuliXIDE}. Jako parametry se v~metodách, ve kterých je to možné, ukazují obrázky vzorů, podle kterých se na obrazovce nástroj orientuje, případně cesta k~nim.
	\begin{figure}[ht!]
		\centering
		\caption{SikuliX-IDE}
		\label{SikuliXIDE}
		\includegraphics[width=13.5cm]{img/SikuliXIDE.png}
	\end{figure}
	
		\subsection{První skript}
		Skript se připravuje v~SikuliX-IDE, které je vidět na obrázku \ref{SikuliXIDE}. Kód, který je vidět v~\ref{PrvniSkript}, není v~IDE identický, ale cesta k~obrázku je vždy nahrazena jeho náhledem. K~tvorbě jsou v~IDE užitečné pomůcky, které se nacházejí v~levém a~v~horním panelu.
		
		Skript pracuje tak, že se otevře prohlížeč, který přejde na adresu \url{http://oks.kiv.zcu.cz/Prevodnik}. Klikne na odkaz \emph{Převodník}, do vstupního pole vloží \emph{1} a~stiskne \emph{Převeď}. Z~pole s~výsledkem přečte text a~porovná jej s~předpokládanou hodnotou \emph{2,54}. Pokud si odpovídají, objeví se dialogové okno s~potvrzením, jestliže ne, zobrazí se chybová hláška. Obdobně je tomu v~následující části, kde se pouze kontroluje existence obrázku.
		
			\input{sikulixPrvniSkript}
		
	\section{Java API}
	Dále bylo zkoumáno Java API, které SikuliX poskytuje. Pro jeho použití je potřeba mít při překladu a~spuštění nastavený v~classpath \emph{sikulixapi.jar}. Toho docílíme např. tak, že použijeme v~příkazové řádce dvou příkazů\\\texttt{javac -cp sikulixapi.jar:. Test01.java}\\\texttt{java -cp sikulixapi.jar:. Test01}\\ Syntaxe, kterou SikuliX v~Java API využívá, je velmi podobná té v~SikuliX-IDE.
	
		\subsection{První test}
		První test s~použitím Java API, viz kód \ref{PrvniJavaAPI}, je téměř identický s~tím, který byl vytvořen pomocí SikuliX-IDE.
		
			\input{javaPrvniSkript}
	
		\subsection{Sofistikovanější testy}
		S~využitím knihoven \emph{JUnit} a~\emph{Log4j} (ani jedna z~těchto knihoven není pro běh SikuliX bezprostředně nutná) byly vytvořeny čtyři testy, viz kód \ref{DalsiJavaAPI}. První test skončí negativně, druhý pozitivně, třetí pozitivně a~čtvrtý negativně.
		
		Knihovna \emph{JUnit} byla použita z~toho důvodu, že nám pomůže jednak s~organizací testů a~jejich spouštěním, a~jednak s~jejich vyhodnocováním. Dále obsahuje metody pro vyhodnocování a~porovnávání hodnot, tzv. \emph{asserty}.
		
		\emph{Log4J} je knihovna, která slouží k~logování informací do souborů. Umožňuje vlastní konfiguraci výstupních souborů a~spoustu dalších funkcí. Použita byla z~toho důvodu, že během testování je vhodné zaznamenávat prováděné činnosti z důvodu jednoduššího zjištění selhání testu. SikuliX poskytuje informace o~tom, kam klikal či psal. Ty vypisuje na standardní výstup, avšak poskytuje metodu, které se přidá instance \emph{Loggeru}, který poté SikuliX použije pro logování.